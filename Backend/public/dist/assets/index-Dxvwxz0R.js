import{R as I,j as e,aa as v,ab as w,ac as A,b as T,ad as D,ae as B,af as O,ag as R,ah as _,r as k,ai as q,aj as M,ak as $,al as H,am as Q,an as z,ao as V,ap as Z,aq as J,ar as K,as as W,H as X,E as Y}from"./index-DVmOQZrp.js";import{B as m}from"./button-D__oTSWQ.js";import{u as P,t as ee}from"./zod-CVPUgilw.js";import{z as i}from"./index-DXqQCM1T.js";const n=I.forwardRef(({className:a,...r},d)=>e.jsx("input",{ref:d,className:`border border-gray-300 rounded-md p-2 focus:outline-none focus:ring-2 focus:ring-blue-500 ${a}`,...r}));n.displayName="Input";const se=i.object({firstName:i.string().min(1,"First name is required").max(50,"First name is too long").optional(),lastName:i.string().min(1,"Last name is required").max(50,"Last name is too long").optional(),phoneNumber:i.string().regex(/^\+?[1-9]\d{1,14}$/,"Invalid phone number format").optional(),address:i.object({street:i.string().optional(),city:i.string().optional(),country:i.string().optional()}).optional(),avatar:i.string().url("Invalid URL format").optional()}),ae=({userProfile:a})=>{if(!a)return e.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg p-6",children:e.jsx("div",{className:"flex items-center justify-center h-32",children:e.jsxs("p",{className:"text-gray-500 dark:text-gray-400 flex items-center gap-2",children:[e.jsx(v,{className:"w-5 h-5"}),"Profile data not available"]})})});const r=t=>Array.isArray(t)?t&&t.length>0:t&&Object.keys(t).length>0,d=()=>a.socialLinks?e.jsxs("div",{className:"flex items-center gap-4",children:[a.socialLinks.twitter&&e.jsx("a",{href:a.socialLinks.twitter,target:"_blank",rel:"noopener noreferrer",className:"hover:opacity-80 transition-opacity",children:e.jsx(O,{className:"text-blue-400 text-xl hover:text-blue-500 transition-colors"})}),a.socialLinks.linkedin&&e.jsx("a",{href:a.socialLinks.linkedin,target:"_blank",rel:"noopener noreferrer",className:"hover:opacity-80 transition-opacity",children:e.jsx(R,{className:"text-blue-600 text-xl hover:text-blue-700 transition-colors"})}),a.socialLinks.github&&e.jsx("a",{href:a.socialLinks.github,target:"_blank",rel:"noopener noreferrer",className:"hover:opacity-80 transition-opacity",children:e.jsx(_,{className:"text-gray-800 dark:text-white text-xl hover:text-gray-600 dark:hover:text-gray-300 transition-colors"})})]}):null;return e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-purple-500 to-indigo-600 p-6",children:e.jsxs("h3",{className:"text-xl font-semibold text-white flex items-center gap-2",children:[e.jsx(v,{}),"Extended Profile"]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[a.bio&&e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg",children:e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:a.bio})}),a.website&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(w,{className:"text-blue-500"}),e.jsx("a",{href:a.website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:text-blue-600 dark:text-blue-400 dark:hover:text-blue-300 transition-colors",children:a.website})]}),d()]}),r(a.achievements)&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h4",{className:"text-lg font-medium flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[e.jsx(A,{className:"text-yellow-500"}),"Achievements"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.achievements.map((t,s)=>e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg",children:e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:t})},s))})]}),r(a.learningGoals)&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h4",{className:"text-lg font-medium flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[e.jsx(T,{className:"text-green-500"}),"Learning Goals"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.learningGoals.map((t,s)=>e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg",children:e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:t})},s))})]}),r(a.targetExams)&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h4",{className:"text-lg font-medium flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[e.jsx(D,{className:"text-blue-500"}),"Target Exams"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.targetExams.map((t,s)=>e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg",children:e.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:t})},s))})]}),r(a.progressTracking)&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h4",{className:"text-lg font-medium flex items-center gap-2 text-gray-700 dark:text-gray-300",children:[e.jsx(B,{className:"text-indigo-500"}),"Progress Tracking"]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:Object.entries(a.progressTracking).map(([t,s])=>e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:t.replace(/([A-Z])/g," $1").trim()}),e.jsx("p",{className:"text-lg font-semibold text-gray-700 dark:text-gray-300",children:s})]},t))})]}),!r(a.achievements)&&!r(a.learningGoals)&&!r(a.targetExams)&&!r(a.progressTracking)&&e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No additional profile data available"})})]})]})},te=()=>{var x,o,g,h,p,N,j,y,u,b,f;const[a,r]=k.useState(!1),[d,t]=k.useState(!1),{data:s,isLoading:F}=q(),{data:L,isLoading:re}=M(void 0,{skip:!a}),[C]=$(),{register:c,handleSubmit:S,formState:{errors:l}}=P({resolver:ee(se),defaultValues:{firstName:(s==null?void 0:s.firstName)||"",lastName:(s==null?void 0:s.lastName)||"",phoneNumber:(s==null?void 0:s.phoneNumber)||"",dateOfBirth:(s==null?void 0:s.dateOfBirth)||"",address:{street:((x=s==null?void 0:s.address)==null?void 0:x.street)||"",city:((o=s==null?void 0:s.address)==null?void 0:o.city)||"",country:(g=s==null?void 0:s.address)==null?void 0:g.country}}}),U=async E=>{try{await C(E).unwrap(),t(!1)}catch(G){console.error("Failed to update user:",G)}};return F?e.jsx("div",{className:"flex items-center justify-center min-h-[200px]",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"})}):s?e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6 p-4",children:[e.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 p-6",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Profile"}),!d&&e.jsxs(m,{onClick:()=>t(!0),variant:"secondary",className:"flex items-center gap-2",children:[e.jsx(H,{className:"w-4 h-4"}),"Edit Profile"]})]})}),d?e.jsxs("form",{onSubmit:S(U),className:"p-6 space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-medium flex items-center gap-2",children:[e.jsx(Q,{className:"text-blue-500"}),"Personal Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"First Name"}),e.jsx(n,{...c("firstName"),className:"w-full"}),l.firstName&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:l.firstName.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Last Name"}),e.jsx(n,{...c("lastName"),className:"w-full"}),l.lastName&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:l.lastName.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Phone Number"}),e.jsxs("div",{className:"relative",children:[e.jsx(z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx(n,{...c("phoneNumber"),className:"pl-10 w-full"})]}),l.phoneNumber&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:l.phoneNumber.message})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h3",{className:"text-lg font-medium flex items-center gap-2",children:[e.jsx(V,{className:"text-blue-500"}),"Address Information"]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Street"}),e.jsx(n,{...c("address.street"),className:"w-full"}),((h=l.address)==null?void 0:h.street)&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:l.address.street.message})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"City"}),e.jsxs("div",{className:"relative",children:[e.jsx(Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx(n,{...c("address.city"),className:"pl-10 w-full"})]}),((p=l.address)==null?void 0:p.city)&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:l.address.city.message})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium mb-1",children:"Country"}),e.jsxs("div",{className:"relative",children:[e.jsx(w,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400"}),e.jsx(n,{...c("address.country"),className:"pl-10 w-full"})]}),((N=l.address)==null?void 0:N.country)&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:l.address.country.message})]})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs(m,{type:"submit",className:"flex items-center justify-center gap-2",children:[e.jsx(J,{}),"Save Changes"]}),e.jsxs(m,{type:"button",variant:"outline",onClick:()=>t(!1),className:"flex items-center justify-center gap-2",children:[e.jsx(K,{}),"Cancel"]})]})]}):e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4",children:[s.avatar?e.jsx("img",{src:s.avatar,alt:s.username,className:"w-24 h-24 rounded-full object-cover border-4 border-white shadow-lg"}):e.jsx("div",{className:"w-24 h-24 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-3xl font-bold text-white shadow-lg",children:(y=(j=s.username)==null?void 0:j[0])==null?void 0:y.toUpperCase()}),e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsx("h3",{className:"text-2xl font-bold",children:s.username}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 flex items-center justify-center sm:justify-start gap-2",children:[e.jsx(W,{className:"text-blue-500"}),s.email]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-gray-500 dark:text-gray-400",children:"Personal Information"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"First Name"}),e.jsx("p",{className:"font-medium",children:s.firstName||"Not set"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Last Name"}),e.jsx("p",{className:"font-medium",children:s.lastName||"Not set"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Phone"}),e.jsx("p",{className:"font-medium",children:s.phoneNumber||"Not set"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-gray-500 dark:text-gray-400",children:"Address Information"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Street"}),e.jsx("p",{className:"font-medium",children:((u=s.address)==null?void 0:u.street)||"Not set"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"City"}),e.jsx("p",{className:"font-medium",children:((b=s.address)==null?void 0:b.city)||"Not set"})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Country"}),e.jsx("p",{className:"font-medium",children:((f=s.address)==null?void 0:f.country)||"Not set"})]})]})]})]})]}),!a&&e.jsx("div",{className:"p-6 border-t border-gray-100 dark:border-gray-700",children:e.jsxs(m,{onClick:()=>r(!0),variant:"outline",className:"w-full flex items-center justify-center gap-2",children:[e.jsx(X,{}),"Show Full Details"]})})]}),a&&!d&&e.jsxs(e.Fragment,{children:[e.jsxs(m,{onClick:()=>r(!1),variant:"outline",className:"w-full flex items-center justify-center gap-2",children:[e.jsx(Y,{}),"Hide Full Details"]}),e.jsx(ae,{userProfile:L})]})]}):e.jsx("div",{className:"text-center p-8 bg-red-50 dark:bg-red-900/20 rounded-lg",children:e.jsx("p",{className:"text-red-600 dark:text-red-400",children:"No user data available"})})},ce=()=>e.jsx(te,{});export{ce as default};
