import{j as e,R as v,d as D,r as M,a8 as T,U as A}from"./index-DVmOQZrp.js";import{t as y,e as L,n as S,g as j,m as b,a as w,b as k,c as z,d as N,f as C}from"./format-C9os4azF.js";function R(t,a){const s=+y(t)-+y(a);return s<0?-1:s>0?1:s}function E(t){return a=>{const o=(t?Math[t]:Math.trunc)(a);return o===0?0:o}}function I(t,a,s){const o=z(),d=(s==null?void 0:s.locale)??o.locale??L,x=R(t,a);if(isNaN(x))throw new RangeError("Invalid time value");const i=Object.assign({},s,{addSuffix:s==null?void 0:s.addSuffix,comparison:x}),[r,c]=S(s==null?void 0:s.in,...x>0?[a,t]:[t,a]),m=E((s==null?void 0:s.roundingMethod)??"round"),h=c.getTime()-r.getTime(),u=h/N,p=j(c)-j(r),g=(h-p)/N,f=s==null?void 0:s.unit;let n;if(f?n=f:u<1?n="second":u<60?n="minute":u<b?n="hour":g<w?n="day":g<k?n="month":n="year",n==="second"){const l=m(h/1e3);return d.formatDistance("xSeconds",l,i)}else if(n==="minute"){const l=m(u);return d.formatDistance("xMinutes",l,i)}else if(n==="hour"){const l=m(u/60);return d.formatDistance("xHours",l,i)}else if(n==="day"){const l=m(g/b);return d.formatDistance("xDays",l,i)}else if(n==="month"){const l=m(g/w);return l===12&&f!=="month"?d.formatDistance("xYears",1,i):d.formatDistance("xMonths",l,i)}else{const l=m(g/k);return d.formatDistance("xYears",l,i)}}const O=({attempt:t,onClose:a})=>t?e.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:e.jsx("div",{className:"absolute inset-0 bg-gray-500 opacity-75",onClick:a})}),e.jsxs("div",{className:"inline-block align-bottom bg-white dark:bg-gray-800 rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[e.jsx("div",{className:"px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:e.jsx("div",{className:"sm:flex sm:items-start",children:e.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:text-left w-full",children:[e.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900 dark:text-white",children:t.test.title}),e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Test Details"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("p",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Status:"}),e.jsx("span",{className:`px-2 py-1 rounded-full ${t.status==="completed"?"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100":"bg-yellow-100 text-yellow-800 dark:bg-yellow-800 dark:text-yellow-100"}`,children:t.status})]}),e.jsxs("p",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Duration:"}),e.jsx("span",{className:"text-gray-900 dark:text-white",children:t.duration})]}),t.score&&e.jsxs("p",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Score:"}),e.jsx("span",{className:"text-gray-900 dark:text-white",children:t.score})]})]})]}),t.result&&e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded-lg",children:e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white mb-2",children:"Results"})})]})]})})}),e.jsx("div",{className:"bg-gray-50 dark:bg-gray-700 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:e.jsx("button",{type:"button",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm",onClick:a,children:"Close"})})]})]})}):null,H=({testAttempts:t=[]})=>{const[a,s]=v.useState(null),o=D(),d=r=>C(new Date(r),"MMM dd, yyyy HH:mm:ss"),x=(r,c)=>c?I(new Date(c),new Date(r)):null,i=M.useMemo(()=>[...t].sort((r,c)=>new Date(c.startTime).getTime()-new Date(r.startTime).getTime()),[t]);return e.jsxs("div",{className:"min-h-screen min-w-[400px] p-6 bg-gray-50 dark:bg-gray-900",children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("h1",{className:"text-3xl font-bold mb-8 text-gray-900 dark:text-white",children:"Test Attempt History"}),i&&i.length>0?e.jsx("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:i.map(r=>e.jsxs("div",{className:"group hover:shadow-xl transition-all duration-300 p-6 rounded-xl shadow-md bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white",children:r.test.title}),e.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${r.status==="completed"?"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-100":"bg-yellow-100 text-yellow-800 dark:bg-yellow-800 dark:text-yellow-100"}`,children:r.status})]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between items-center text-gray-600 dark:text-gray-300",children:[e.jsx("span",{className:"font-medium",children:"Started:"}),e.jsx("span",{children:d(r.startTime)})]}),r.endTime&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between items-center text-gray-600 dark:text-gray-300",children:[e.jsx("span",{className:"font-medium",children:"Ended:"}),e.jsx("span",{children:d(r.endTime)})]}),e.jsxs("div",{className:"flex justify-between items-center text-gray-600 dark:text-gray-300",children:[e.jsx("span",{className:"font-medium",children:"Duration:"}),e.jsx("span",{children:x(r.startTime,r.endTime)})]})]})]}),e.jsxs("div",{className:"mt-6 flex gap-2",children:[e.jsxs("button",{className:`flex-1 px-4 py-2.5 rounded-lg bg-gray-100 hover:bg-gray-200 \r
                    dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-200 font-medium \r
                    transition-colors duration-200 flex items-center justify-center gap-2`,onClick:()=>s(r),children:[e.jsx("span",{children:"View Details"}),e.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})]}),r.result&&e.jsxs("button",{className:`flex-1 px-4 py-2.5 rounded-lg bg-blue-500 hover:bg-blue-600 \r
                      dark:bg-blue-600 dark:hover:bg-blue-700 text-white font-medium \r
                      transition-colors duration-200 flex items-center justify-center gap-2`,onClick:()=>{o(`/test-results/${r._id}`)},children:[e.jsx("span",{children:"View Result"}),e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]},r._id))}):e.jsxs("div",{className:"text-center py-12 bg-white dark:bg-gray-800 rounded-xl shadow-md",children:[e.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900 dark:text-white",children:"No test attempts"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:"You haven't taken any tests yet."})]})]}),a&&e.jsx(O,{attempt:a,onClose:()=>s(null)})]})},U=()=>{const{data:t,isLoading:a,isError:s}=T();return a?e.jsx(A,{}):s?e.jsx("div",{children:"Error loading test attempts"}):t&&t.length===0?e.jsx("div",{children:"No test attempts found"}):e.jsx(H,{testAttempts:t})};export{U as default};
