import{R as p}from"./index-DVmOQZrp.js";var he=e=>e.type==="checkbox",ne=e=>e instanceof Date,q=e=>e==null;const cr=e=>typeof e=="object";var O=e=>!q(e)&&!Array.isArray(e)&&cr(e)&&!ne(e),Sr=e=>O(e)&&e.target?he(e.target)?e.target.checked:e.target.value:e,Cr=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,Or=(e,t)=>e.has(Cr(t)),Tr=e=>{const t=e.constructor&&e.constructor.prototype;return O(t)&&t.hasOwnProperty("isPrototypeOf")},je=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function M(e){let t;const r=Array.isArray(e);if(e instanceof Date)t=new Date(e);else if(e instanceof Set)t=new Set(e);else if(!(je&&(e instanceof Blob||e instanceof FileList))&&(r||O(e)))if(t=r?[]:{},!r&&!Tr(e))t=e;else for(const i in e)e.hasOwnProperty(i)&&(t[i]=M(e[i]));else return e;return t}var _e=e=>Array.isArray(e)?e.filter(Boolean):[],E=e=>e===void 0,d=(e,t,r)=>{if(!t||!O(e))return r;const i=_e(t.split(/[,[\].]+?/)).reduce((l,n)=>q(l)?l:l[n],e);return E(i)||i===e?E(e[t])?r:e[t]:i},Z=e=>typeof e=="boolean",qe=e=>/^\w*$/.test(e),fr=e=>_e(e.replace(/["|']|\]/g,"").split(/\.|\[/)),k=(e,t,r)=>{let i=-1;const l=qe(t)?[t]:fr(t),n=l.length,f=n-1;for(;++i<n;){const v=l[i];let V=r;if(i!==f){const N=e[v];V=O(N)||Array.isArray(N)?N:isNaN(+l[i+1])?{}:[]}if(v==="__proto__")return;e[v]=V,e=e[v]}return e};const rr={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},K={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},re={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Nr=p.createContext(null),Ur=()=>p.useContext(Nr);var Lr=(e,t,r,i=!0)=>{const l={defaultValues:t._defaultValues};for(const n in e)Object.defineProperty(l,n,{get:()=>{const f=n;return t._proxyFormState[f]!==K.all&&(t._proxyFormState[f]=!i||K.all),e[f]}});return l},j=e=>O(e)&&!Object.keys(e).length,Rr=(e,t,r,i)=>{r(e);const{name:l,...n}=e;return j(n)||Object.keys(n).length>=Object.keys(t).length||Object.keys(n).find(f=>t[f]===K.all)},W=e=>Array.isArray(e)?e:[e];function dr(e){const t=p.useRef(e);t.current=e,p.useEffect(()=>{const r=!e.disabled&&t.current.subject&&t.current.subject.subscribe({next:t.current.next});return()=>{r&&r.unsubscribe()}},[e.disabled])}var ee=e=>typeof e=="string",Mr=(e,t,r,i,l)=>ee(e)?(i&&t.watch.add(e),d(r,e,l)):Array.isArray(e)?e.map(n=>(i&&t.watch.add(n),d(r,n))):(i&&(t.watchAll=!0),r),yr=(e,t,r,i,l)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[i]:l||!0}}:{},se=()=>{const e=typeof performance>"u"?Date.now():performance.now()*1e3;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const r=(Math.random()*16+e)%16|0;return(t=="x"?r:r&3|8).toString(16)})},De=(e,t,r={})=>r.shouldFocus||E(r.shouldFocus)?r.focusName||`${e}.${E(r.focusIndex)?t:r.focusIndex}.`:"",ve=e=>({isOnSubmit:!e||e===K.onSubmit,isOnBlur:e===K.onBlur,isOnChange:e===K.onChange,isOnAll:e===K.all,isOnTouch:e===K.onTouched}),Ie=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(i=>e.startsWith(i)&&/^\.\w+/.test(e.slice(i.length))));const le=(e,t,r,i)=>{for(const l of r||Object.keys(e)){const n=d(e,l);if(n){const{_f:f,...v}=n;if(f){if(f.refs&&f.refs[0]&&t(f.refs[0],l)&&!i)return!0;if(f.ref&&t(f.ref,f.name)&&!i)return!0;if(le(v,t))break}else if(O(v)&&le(v,t))break}}};var gr=(e,t,r)=>{const i=W(d(e,r));return k(i,"root",t[r]),k(e,r,i),e},We=e=>e.type==="file",te=e=>typeof e=="function",me=e=>{if(!je)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},be=e=>ee(e),He=e=>e.type==="radio",Fe=e=>e instanceof RegExp;const tr={value:!1,isValid:!1},sr={value:!0,isValid:!0};var vr=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!E(e[0].attributes.value)?E(e[0].value)||e[0].value===""?sr:{value:e[0].value,isValid:!0}:sr:tr}return tr};const ir={isValid:!1,value:null};var hr=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,ir):ir;function ar(e,t,r="validate"){if(be(e)||Array.isArray(e)&&e.every(be)||Z(e)&&!e)return{type:r,message:be(e)?e:"",ref:t}}var ue=e=>O(e)&&!Fe(e)?e:{value:e,message:""},Pe=async(e,t,r,i,l)=>{const{ref:n,refs:f,required:v,maxLength:V,minLength:N,min:D,max:A,pattern:C,validate:Q,name:P,valueAsNumber:oe,mount:Y,disabled:X}=e._f,x=d(t,P);if(!Y||X)return{};const z=f?f[0]:n,G=F=>{i&&z.reportValidity&&(z.setCustomValidity(Z(F)?"":F||""),z.reportValidity())},g={},h=He(n),m=he(n),S=h||m,H=(oe||We(n))&&E(n.value)&&E(x)||me(n)&&n.value===""||x===""||Array.isArray(x)&&!x.length,B=yr.bind(null,P,r,g),Ae=(F,w,U,I=re.maxLength,J=re.minLength)=>{const $=F?w:U;g[P]={type:F?I:J,message:$,ref:n,...B(F?I:J,$)}};if(l?!Array.isArray(x)||!x.length:v&&(!S&&(H||q(x))||Z(x)&&!x||m&&!vr(f).isValid||h&&!hr(f).isValid)){const{value:F,message:w}=be(v)?{value:!!v,message:v}:ue(v);if(F&&(g[P]={type:re.required,message:w,ref:z,...B(re.required,w)},!r))return G(w),g}if(!H&&(!q(D)||!q(A))){let F,w;const U=ue(A),I=ue(D);if(!q(x)&&!isNaN(x)){const J=n.valueAsNumber||x&&+x;q(U.value)||(F=J>U.value),q(I.value)||(w=J<I.value)}else{const J=n.valueAsDate||new Date(x),$=de=>new Date(new Date().toDateString()+" "+de),ce=n.type=="time",fe=n.type=="week";ee(U.value)&&x&&(F=ce?$(x)>$(U.value):fe?x>U.value:J>new Date(U.value)),ee(I.value)&&x&&(w=ce?$(x)<$(I.value):fe?x<I.value:J<new Date(I.value))}if((F||w)&&(Ae(!!F,U.message,I.message,re.max,re.min),!r))return G(g[P].message),g}if((V||N)&&!H&&(ee(x)||l&&Array.isArray(x))){const F=ue(V),w=ue(N),U=!q(F.value)&&x.length>+F.value,I=!q(w.value)&&x.length<+w.value;if((U||I)&&(Ae(U,F.message,w.message),!r))return G(g[P].message),g}if(C&&!H&&ee(x)){const{value:F,message:w}=ue(C);if(Fe(F)&&!x.match(F)&&(g[P]={type:re.pattern,message:w,ref:n,...B(re.pattern,w)},!r))return G(w),g}if(Q){if(te(Q)){const F=await Q(x,t),w=ar(F,z);if(w&&(g[P]={...w,...B(re.validate,w.message)},!r))return G(w.message),g}else if(O(Q)){let F={};for(const w in Q){if(!j(F)&&!r)break;const U=ar(await Q[w](x,t),z,w);U&&(F={...U,...B(w,U.message)},G(U.message),r&&(g[P]=F))}if(!j(F)&&(g[P]={ref:z,...F},!r))return g}}return G(!0),g},Ee=(e,t)=>[...e,...W(t)],Se=e=>Array.isArray(e)?e.map(()=>{}):void 0;function Ce(e,t,r){return[...e.slice(0,t),...W(r),...e.slice(t)]}var Oe=(e,t,r)=>Array.isArray(e)?(E(e[r])&&(e[r]=void 0),e.splice(r,0,e.splice(t,1)[0]),e):[],Te=(e,t)=>[...W(t),...W(e)];function Ir(e,t){let r=0;const i=[...e];for(const l of t)i.splice(l-r,1),r++;return _e(i).length?i:[]}var Ne=(e,t)=>E(t)?[]:Ir(e,W(t).sort((r,i)=>r-i)),Ue=(e,t,r)=>{[e[t],e[r]]=[e[r],e[t]]};function Pr(e,t){const r=t.slice(0,-1).length;let i=0;for(;i<r;)e=E(e)?i++:e[t[i++]];return e}function Br(e){for(const t in e)if(e.hasOwnProperty(t)&&!E(e[t]))return!1;return!0}function T(e,t){const r=Array.isArray(t)?t:qe(t)?[t]:fr(t),i=r.length===1?e:Pr(e,r),l=r.length-1,n=r[l];return i&&delete i[n],l!==0&&(O(i)&&j(i)||Array.isArray(i)&&Br(i))&&T(e,r.slice(0,-1)),e}var nr=(e,t,r)=>(e[t]=r,e);function tt(e){const t=Ur(),{control:r=t.control,name:i,keyName:l="id",shouldUnregister:n}=e,[f,v]=p.useState(r._getFieldArray(i)),V=p.useRef(r._getFieldArray(i).map(se)),N=p.useRef(f),D=p.useRef(i),A=p.useRef(!1);D.current=i,N.current=f,r._names.array.add(i),e.rules&&r.register(i,e.rules),dr({next:({values:g,name:h})=>{if(h===D.current||!h){const m=d(g,D.current);Array.isArray(m)&&(v(m),V.current=m.map(se))}},subject:r._subjects.array});const C=p.useCallback(g=>{A.current=!0,r._updateFieldArray(i,g)},[r,i]),Q=(g,h)=>{const m=W(M(g)),S=Ee(r._getFieldArray(i),m);r._names.focus=De(i,S.length-1,h),V.current=Ee(V.current,m.map(se)),C(S),v(S),r._updateFieldArray(i,S,Ee,{argA:Se(g)})},P=(g,h)=>{const m=W(M(g)),S=Te(r._getFieldArray(i),m);r._names.focus=De(i,0,h),V.current=Te(V.current,m.map(se)),C(S),v(S),r._updateFieldArray(i,S,Te,{argA:Se(g)})},oe=g=>{const h=Ne(r._getFieldArray(i),g);V.current=Ne(V.current,g),C(h),v(h),r._updateFieldArray(i,h,Ne,{argA:g})},Y=(g,h,m)=>{const S=W(M(h)),H=Ce(r._getFieldArray(i),g,S);r._names.focus=De(i,g,m),V.current=Ce(V.current,g,S.map(se)),C(H),v(H),r._updateFieldArray(i,H,Ce,{argA:g,argB:Se(h)})},X=(g,h)=>{const m=r._getFieldArray(i);Ue(m,g,h),Ue(V.current,g,h),C(m),v(m),r._updateFieldArray(i,m,Ue,{argA:g,argB:h},!1)},x=(g,h)=>{const m=r._getFieldArray(i);Oe(m,g,h),Oe(V.current,g,h),C(m),v(m),r._updateFieldArray(i,m,Oe,{argA:g,argB:h},!1)},z=(g,h)=>{const m=M(h),S=nr(r._getFieldArray(i),g,m);V.current=[...S].map((H,B)=>!H||B===g?se():V.current[B]),C(S),v([...S]),r._updateFieldArray(i,S,nr,{argA:g,argB:m},!0,!1)},G=g=>{const h=W(M(g));V.current=h.map(se),C([...h]),v([...h]),r._updateFieldArray(i,[...h],m=>m,{},!0,!1)};return p.useEffect(()=>{if(r._state.action=!1,Ie(i,r._names)&&r._subjects.state.next({...r._formState}),A.current&&(!ve(r._options.mode).isOnSubmit||r._formState.isSubmitted))if(r._options.resolver)r._executeSchema([i]).then(g=>{const h=d(g.errors,i),m=d(r._formState.errors,i);(m?!h&&m.type||h&&(m.type!==h.type||m.message!==h.message):h&&h.type)&&(h?k(r._formState.errors,i,h):T(r._formState.errors,i),r._subjects.state.next({errors:r._formState.errors}))});else{const g=d(r._fields,i);g&&g._f&&!(ve(r._options.reValidateMode).isOnSubmit&&ve(r._options.mode).isOnSubmit)&&Pe(g,r._formValues,r._options.criteriaMode===K.all,r._options.shouldUseNativeValidation,!0).then(h=>!j(h)&&r._subjects.state.next({errors:gr(r._formState.errors,h,i)}))}r._subjects.values.next({name:i,values:{...r._formValues}}),r._names.focus&&le(r._fields,(g,h)=>{if(r._names.focus&&h.startsWith(r._names.focus)&&g.focus)return g.focus(),1}),r._names.focus="",r._updateValid(),A.current=!1},[f,i,r]),p.useEffect(()=>(!d(r._formValues,i)&&r._updateFieldArray(i),()=>{(r._options.shouldUnregister||n)&&r.unregister(i)}),[i,r,l,n]),{swap:p.useCallback(X,[C,i,r]),move:p.useCallback(x,[C,i,r]),prepend:p.useCallback(P,[C,i,r]),append:p.useCallback(Q,[C,i,r]),remove:p.useCallback(oe,[C,i,r]),insert:p.useCallback(Y,[C,i,r]),update:p.useCallback(z,[C,i,r]),replace:p.useCallback(G,[C,i,r]),fields:p.useMemo(()=>f.map((g,h)=>({...g,[l]:V.current[h]||se()})),[f,l])}}var Le=()=>{let e=[];return{get observers(){return e},next:l=>{for(const n of e)n.next&&n.next(l)},subscribe:l=>(e.push(l),{unsubscribe:()=>{e=e.filter(n=>n!==l)}}),unsubscribe:()=>{e=[]}}},Be=e=>q(e)||!cr(e);function ie(e,t){if(Be(e)||Be(t))return e===t;if(ne(e)&&ne(t))return e.getTime()===t.getTime();const r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(const l of r){const n=e[l];if(!i.includes(l))return!1;if(l!=="ref"){const f=t[l];if(ne(n)&&ne(f)||O(n)&&O(f)||Array.isArray(n)&&Array.isArray(f)?!ie(n,f):n!==f)return!1}}return!0}var _r=e=>e.type==="select-multiple",jr=e=>He(e)||he(e),Re=e=>me(e)&&e.isConnected,Ar=e=>{for(const t in e)if(te(e[t]))return!0;return!1};function Ve(e,t={}){const r=Array.isArray(e);if(O(e)||r)for(const i in e)Array.isArray(e[i])||O(e[i])&&!Ar(e[i])?(t[i]=Array.isArray(e[i])?[]:{},Ve(e[i],t[i])):q(e[i])||(t[i]=!0);return t}function br(e,t,r){const i=Array.isArray(e);if(O(e)||i)for(const l in e)Array.isArray(e[l])||O(e[l])&&!Ar(e[l])?E(t)||Be(r[l])?r[l]=Array.isArray(e[l])?Ve(e[l],[]):{...Ve(e[l])}:br(e[l],q(t)?{}:t[l],r[l]):r[l]=!ie(e[l],t[l]);return r}var ye=(e,t)=>br(e,t,Ve(t)),mr=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:i})=>E(e)?e:t?e===""?NaN:e&&+e:r&&ee(e)?new Date(e):i?i(e):e;function Me(e){const t=e.ref;if(!(e.refs?e.refs.every(r=>r.disabled):t.disabled))return We(t)?t.files:He(t)?hr(e.refs).value:_r(t)?[...t.selectedOptions].map(({value:r})=>r):he(t)?vr(e.refs).value:mr(E(t.value)?e.ref.value:t.value,e)}var qr=(e,t,r,i)=>{const l={};for(const n of e){const f=d(t,n);f&&k(l,n,f._f)}return{criteriaMode:r,names:[...e],fields:l,shouldUseNativeValidation:i}},ge=e=>E(e)?e:Fe(e)?e.source:O(e)?Fe(e.value)?e.value.source:e.value:e;const ur="AsyncFunction";var Wr=e=>(!e||!e.validate)&&!!(te(e.validate)&&e.validate.constructor.name===ur||O(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===ur)),Hr=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate);function lr(e,t,r){const i=d(e,r);if(i||qe(r))return{error:i,name:r};const l=r.split(".");for(;l.length;){const n=l.join("."),f=d(t,n),v=d(e,n);if(f&&!Array.isArray(f)&&r!==n)return{name:r};if(v&&v.type)return{name:n,error:v};l.pop()}return{name:r}}var $r=(e,t,r,i,l)=>l.isOnAll?!1:!r&&l.isOnTouch?!(t||e):(r?i.isOnBlur:l.isOnBlur)?!e:(r?i.isOnChange:l.isOnChange)?e:!0,Kr=(e,t)=>!_e(d(e,t)).length&&T(e,t);const Yr={mode:K.onSubmit,reValidateMode:K.onChange,shouldFocusError:!0};function zr(e={}){let t={...Yr,...e},r={submitCount:0,isDirty:!1,isLoading:te(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},i={},l=O(t.defaultValues)||O(t.values)?M(t.defaultValues||t.values)||{}:{},n=t.shouldUnregister?{}:M(l),f={action:!1,mount:!1,watch:!1},v={mount:new Set,unMount:new Set,array:new Set,watch:new Set},V,N=0;const D={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1},A={values:Le(),array:Le(),state:Le()},C=ve(t.mode),Q=ve(t.reValidateMode),P=t.criteriaMode===K.all,oe=s=>a=>{clearTimeout(N),N=setTimeout(s,a)},Y=async s=>{if(!e.disabled&&(D.isValid||s)){const a=t.resolver?j((await S()).errors):await B(i,!0);a!==r.isValid&&A.state.next({isValid:a})}},X=(s,a)=>{!e.disabled&&(D.isValidating||D.validatingFields)&&((s||Array.from(v.mount)).forEach(u=>{u&&(a?k(r.validatingFields,u,a):T(r.validatingFields,u))}),A.state.next({validatingFields:r.validatingFields,isValidating:!j(r.validatingFields)}))},x=(s,a=[],u,y,c=!0,o=!0)=>{if(y&&u&&!e.disabled){if(f.action=!0,o&&Array.isArray(d(i,s))){const _=u(d(i,s),y.argA,y.argB);c&&k(i,s,_)}if(o&&Array.isArray(d(r.errors,s))){const _=u(d(r.errors,s),y.argA,y.argB);c&&k(r.errors,s,_),Kr(r.errors,s)}if(D.touchedFields&&o&&Array.isArray(d(r.touchedFields,s))){const _=u(d(r.touchedFields,s),y.argA,y.argB);c&&k(r.touchedFields,s,_)}D.dirtyFields&&(r.dirtyFields=ye(l,n)),A.state.next({name:s,isDirty:F(s,a),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else k(n,s,a)},z=(s,a)=>{k(r.errors,s,a),A.state.next({errors:r.errors})},G=s=>{r.errors=s,A.state.next({errors:r.errors,isValid:!1})},g=(s,a,u,y)=>{const c=d(i,s);if(c){const o=d(n,s,E(u)?d(l,s):u);E(o)||y&&y.defaultChecked||a?k(n,s,a?o:Me(c._f)):I(s,o),f.mount&&Y()}},h=(s,a,u,y,c)=>{let o=!1,_=!1;const b={name:s};if(!e.disabled){const L=!!(d(i,s)&&d(i,s)._f&&d(i,s)._f.disabled);if(!u||y){D.isDirty&&(_=r.isDirty,r.isDirty=b.isDirty=F(),o=_!==b.isDirty);const R=L||ie(d(l,s),a);_=!!(!L&&d(r.dirtyFields,s)),R||L?T(r.dirtyFields,s):k(r.dirtyFields,s,!0),b.dirtyFields=r.dirtyFields,o=o||D.dirtyFields&&_!==!R}if(u){const R=d(r.touchedFields,s);R||(k(r.touchedFields,s,u),b.touchedFields=r.touchedFields,o=o||D.touchedFields&&R!==u)}o&&c&&A.state.next(b)}return o?b:{}},m=(s,a,u,y)=>{const c=d(r.errors,s),o=D.isValid&&Z(a)&&r.isValid!==a;if(e.delayError&&u?(V=oe(()=>z(s,u)),V(e.delayError)):(clearTimeout(N),V=null,u?k(r.errors,s,u):T(r.errors,s)),(u?!ie(c,u):c)||!j(y)||o){const _={...y,...o&&Z(a)?{isValid:a}:{},errors:r.errors,name:s};r={...r,..._},A.state.next(_)}},S=async s=>{X(s,!0);const a=await t.resolver(n,t.context,qr(s||v.mount,i,t.criteriaMode,t.shouldUseNativeValidation));return X(s),a},H=async s=>{const{errors:a}=await S(s);if(s)for(const u of s){const y=d(a,u);y?k(r.errors,u,y):T(r.errors,u)}else r.errors=a;return a},B=async(s,a,u={valid:!0})=>{for(const y in s){const c=s[y];if(c){const{_f:o,..._}=c;if(o){const b=v.array.has(o.name),L=c._f&&Wr(c._f);L&&D.validatingFields&&X([y],!0);const R=await Pe(c,n,P,t.shouldUseNativeValidation&&!a,b);if(L&&D.validatingFields&&X([y]),R[o.name]&&(u.valid=!1,a))break;!a&&(d(R,o.name)?b?gr(r.errors,R,o.name):k(r.errors,o.name,R[o.name]):T(r.errors,o.name))}!j(_)&&await B(_,a,u)}}return u.valid},Ae=()=>{for(const s of v.unMount){const a=d(i,s);a&&(a._f.refs?a._f.refs.every(u=>!Re(u)):!Re(a._f.ref))&&xe(s)}v.unMount=new Set},F=(s,a)=>!e.disabled&&(s&&a&&k(n,s,a),!ie($e(),l)),w=(s,a,u)=>Mr(s,v,{...f.mount?n:E(a)?l:ee(s)?{[s]:a}:a},u,a),U=s=>_e(d(f.mount?n:l,s,e.shouldUnregister?d(l,s,[]):[])),I=(s,a,u={})=>{const y=d(i,s);let c=a;if(y){const o=y._f;o&&(!o.disabled&&k(n,s,mr(a,o)),c=me(o.ref)&&q(a)?"":a,_r(o.ref)?[...o.ref.options].forEach(_=>_.selected=c.includes(_.value)):o.refs?he(o.ref)?o.refs.length>1?o.refs.forEach(_=>(!_.defaultChecked||!_.disabled)&&(_.checked=Array.isArray(c)?!!c.find(b=>b===_.value):c===_.value)):o.refs[0]&&(o.refs[0].checked=!!c):o.refs.forEach(_=>_.checked=_.value===c):We(o.ref)?o.ref.value="":(o.ref.value=c,o.ref.type||A.values.next({name:s,values:{...n}})))}(u.shouldDirty||u.shouldTouch)&&h(s,c,u.shouldTouch,u.shouldDirty,!0),u.shouldValidate&&de(s)},J=(s,a,u)=>{for(const y in a){const c=a[y],o=`${s}.${y}`,_=d(i,o);(v.array.has(s)||O(c)||_&&!_._f)&&!ne(c)?J(o,c,u):I(o,c,u)}},$=(s,a,u={})=>{const y=d(i,s),c=v.array.has(s),o=M(a);k(n,s,o),c?(A.array.next({name:s,values:{...n}}),(D.isDirty||D.dirtyFields)&&u.shouldDirty&&A.state.next({name:s,dirtyFields:ye(l,n),isDirty:F(s,o)})):y&&!y._f&&!q(o)?J(s,o,u):I(s,o,u),Ie(s,v)&&A.state.next({...r}),A.values.next({name:f.mount?s:void 0,values:{...n}})},ce=async s=>{f.mount=!0;const a=s.target;let u=a.name,y=!0;const c=d(i,u),o=()=>a.type?Me(c._f):Sr(s),_=b=>{y=Number.isNaN(b)||ne(b)&&isNaN(b.getTime())||ie(b,d(n,u,b))};if(c){let b,L;const R=o(),ae=s.type===rr.BLUR||s.type===rr.FOCUS_OUT,kr=!Hr(c._f)&&!t.resolver&&!d(r.errors,u)&&!c._f.deps||$r(ae,d(r.touchedFields,u),r.isSubmitted,Q,C),we=Ie(u,v,ae);k(n,u,R),ae?(c._f.onBlur&&c._f.onBlur(s),V&&V(0)):c._f.onChange&&c._f.onChange(s);const ke=h(u,R,ae,!1),Dr=!j(ke)||we;if(!ae&&A.values.next({name:u,type:s.type,values:{...n}}),kr)return D.isValid&&(e.mode==="onBlur"?ae&&Y():Y()),Dr&&A.state.next({name:u,...we?{}:ke});if(!ae&&we&&A.state.next({...r}),t.resolver){const{errors:Ze}=await S([u]);if(_(R),y){const Er=lr(r.errors,i,u),er=lr(Ze,i,Er.name||u);b=er.error,u=er.name,L=j(Ze)}}else X([u],!0),b=(await Pe(c,n,P,t.shouldUseNativeValidation))[u],X([u]),_(R),y&&(b?L=!1:D.isValid&&(L=await B(i,!0)));y&&(c._f.deps&&de(c._f.deps),m(u,L,b,ke))}},fe=(s,a)=>{if(d(r.errors,a)&&s.focus)return s.focus(),1},de=async(s,a={})=>{let u,y;const c=W(s);if(t.resolver){const o=await H(E(s)?s:c);u=j(o),y=s?!c.some(_=>d(o,_)):u}else s?(y=(await Promise.all(c.map(async o=>{const _=d(i,o);return await B(_&&_._f?{[o]:_}:_)}))).every(Boolean),!(!y&&!r.isValid)&&Y()):y=u=await B(i);return A.state.next({...!ee(s)||D.isValid&&u!==r.isValid?{}:{name:s},...t.resolver||!s?{isValid:u}:{},errors:r.errors}),a.shouldFocus&&!y&&le(i,fe,s?c:v.mount),y},$e=s=>{const a={...f.mount?n:l};return E(s)?a:ee(s)?d(a,s):s.map(u=>d(a,u))},Ke=(s,a)=>({invalid:!!d((a||r).errors,s),isDirty:!!d((a||r).dirtyFields,s),error:d((a||r).errors,s),isValidating:!!d(r.validatingFields,s),isTouched:!!d((a||r).touchedFields,s)}),Vr=s=>{s&&W(s).forEach(a=>T(r.errors,a)),A.state.next({errors:s?r.errors:{}})},Ye=(s,a,u)=>{const y=(d(i,s,{_f:{}})._f||{}).ref,c=d(r.errors,s)||{},{ref:o,message:_,type:b,...L}=c;k(r.errors,s,{...L,...a,ref:y}),A.state.next({name:s,errors:r.errors,isValid:!1}),u&&u.shouldFocus&&y&&y.focus&&y.focus()},xr=(s,a)=>te(s)?A.values.subscribe({next:u=>s(w(void 0,a),u)}):w(s,a,!0),xe=(s,a={})=>{for(const u of s?W(s):v.mount)v.mount.delete(u),v.array.delete(u),a.keepValue||(T(i,u),T(n,u)),!a.keepError&&T(r.errors,u),!a.keepDirty&&T(r.dirtyFields,u),!a.keepTouched&&T(r.touchedFields,u),!a.keepIsValidating&&T(r.validatingFields,u),!t.shouldUnregister&&!a.keepDefaultValue&&T(l,u);A.values.next({values:{...n}}),A.state.next({...r,...a.keepDirty?{isDirty:F()}:{}}),!a.keepIsValid&&Y()},ze=({disabled:s,name:a,field:u,fields:y,value:c})=>{if(Z(s)&&f.mount||s){const o=s?void 0:E(c)?Me(u?u._f:d(y,a)._f):c;k(n,a,o),h(a,o,!1,!1,!0)}},pe=(s,a={})=>{let u=d(i,s);const y=Z(a.disabled)||Z(e.disabled);return k(i,s,{...u||{},_f:{...u&&u._f?u._f:{ref:{name:s}},name:s,mount:!0,...a}}),v.mount.add(s),u?ze({field:u,disabled:Z(a.disabled)?a.disabled:e.disabled,name:s,value:a.value}):g(s,!0,a.value),{...y?{disabled:a.disabled||e.disabled}:{},...t.progressive?{required:!!a.required,min:ge(a.min),max:ge(a.max),minLength:ge(a.minLength),maxLength:ge(a.maxLength),pattern:ge(a.pattern)}:{},name:s,onChange:ce,onBlur:ce,ref:c=>{if(c){pe(s,a),u=d(i,s);const o=E(c.value)&&c.querySelectorAll&&c.querySelectorAll("input,select,textarea")[0]||c,_=jr(o),b=u._f.refs||[];if(_?b.find(L=>L===o):o===u._f.ref)return;k(i,s,{_f:{...u._f,..._?{refs:[...b.filter(Re),o,...Array.isArray(d(l,s))?[{}]:[]],ref:{type:o.type,name:s}}:{ref:o}}}),g(s,!1,void 0,o)}else u=d(i,s,{}),u._f&&(u._f.mount=!1),(t.shouldUnregister||a.shouldUnregister)&&!(Or(v.array,s)&&f.action)&&v.unMount.add(s)}}},Ge=()=>t.shouldFocusError&&le(i,fe,v.mount),pr=s=>{Z(s)&&(A.state.next({disabled:s}),le(i,(a,u)=>{const y=d(i,u);y&&(a.disabled=y._f.disabled||s,Array.isArray(y._f.refs)&&y._f.refs.forEach(c=>{c.disabled=y._f.disabled||s}))},0,!1))},Je=(s,a)=>async u=>{let y;u&&(u.preventDefault&&u.preventDefault(),u.persist&&u.persist());let c=M(n);if(A.state.next({isSubmitting:!0}),t.resolver){const{errors:o,values:_}=await S();r.errors=o,c=_}else await B(i);if(T(r.errors,"root"),j(r.errors)){A.state.next({errors:{}});try{await s(c,u)}catch(o){y=o}}else a&&await a({...r.errors},u),Ge(),setTimeout(Ge);if(A.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:j(r.errors)&&!y,submitCount:r.submitCount+1,errors:r.errors}),y)throw y},wr=(s,a={})=>{d(i,s)&&(E(a.defaultValue)?$(s,M(d(l,s))):($(s,a.defaultValue),k(l,s,M(a.defaultValue))),a.keepTouched||T(r.touchedFields,s),a.keepDirty||(T(r.dirtyFields,s),r.isDirty=a.defaultValue?F(s,M(d(l,s))):F()),a.keepError||(T(r.errors,s),D.isValid&&Y()),A.state.next({...r}))},Qe=(s,a={})=>{const u=s?M(s):l,y=M(u),c=j(s),o=c?l:y;if(a.keepDefaultValues||(l=u),!a.keepValues){if(a.keepDirtyValues){const _=new Set([...v.mount,...Object.keys(ye(l,n))]);for(const b of Array.from(_))d(r.dirtyFields,b)?k(o,b,d(n,b)):$(b,d(o,b))}else{if(je&&E(s))for(const _ of v.mount){const b=d(i,_);if(b&&b._f){const L=Array.isArray(b._f.refs)?b._f.refs[0]:b._f.ref;if(me(L)){const R=L.closest("form");if(R){R.reset();break}}}}i={}}n=e.shouldUnregister?a.keepDefaultValues?M(l):{}:M(o),A.array.next({values:{...o}}),A.values.next({values:{...o}})}v={mount:a.keepDirtyValues?v.mount:new Set,unMount:new Set,array:new Set,watch:new Set,watchAll:!1,focus:""},f.mount=!D.isValid||!!a.keepIsValid||!!a.keepDirtyValues,f.watch=!!e.shouldUnregister,A.state.next({submitCount:a.keepSubmitCount?r.submitCount:0,isDirty:c?!1:a.keepDirty?r.isDirty:!!(a.keepDefaultValues&&!ie(s,l)),isSubmitted:a.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:c?{}:a.keepDirtyValues?a.keepDefaultValues&&n?ye(l,n):r.dirtyFields:a.keepDefaultValues&&s?ye(l,s):a.keepDirty?r.dirtyFields:{},touchedFields:a.keepTouched?r.touchedFields:{},errors:a.keepErrors?r.errors:{},isSubmitSuccessful:a.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1})},Xe=(s,a)=>Qe(te(s)?s(n):s,a);return{control:{register:pe,unregister:xe,getFieldState:Ke,handleSubmit:Je,setError:Ye,_executeSchema:S,_getWatch:w,_getDirty:F,_updateValid:Y,_removeUnmounted:Ae,_updateFieldArray:x,_updateDisabledField:ze,_getFieldArray:U,_reset:Qe,_resetDefaultValues:()=>te(t.defaultValues)&&t.defaultValues().then(s=>{Xe(s,t.resetOptions),A.state.next({isLoading:!1})}),_updateFormState:s=>{r={...r,...s}},_disableForm:pr,_subjects:A,_proxyFormState:D,_setErrors:G,get _fields(){return i},get _formValues(){return n},get _state(){return f},set _state(s){f=s},get _defaultValues(){return l},get _names(){return v},set _names(s){v=s},get _formState(){return r},set _formState(s){r=s},get _options(){return t},set _options(s){t={...t,...s}}},trigger:de,register:pe,handleSubmit:Je,watch:xr,setValue:$,getValues:$e,reset:Xe,resetField:wr,clearErrors:Vr,unregister:xe,setError:Ye,setFocus:(s,a={})=>{const u=d(i,s),y=u&&u._f;if(y){const c=y.refs?y.refs[0]:y.ref;c.focus&&(c.focus(),a.shouldSelect&&c.select())}},getFieldState:Ke}}function st(e={}){const t=p.useRef(),r=p.useRef(),[i,l]=p.useState({isDirty:!1,isValidating:!1,isLoading:te(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,defaultValues:te(e.defaultValues)?void 0:e.defaultValues});t.current||(t.current={...zr(e),formState:i});const n=t.current.control;return n._options=e,dr({subject:n._subjects.state,next:f=>{Rr(f,n._proxyFormState,n._updateFormState)&&l({...n._formState})}}),p.useEffect(()=>n._disableForm(e.disabled),[n,e.disabled]),p.useEffect(()=>{if(n._proxyFormState.isDirty){const f=n._getDirty();f!==i.isDirty&&n._subjects.state.next({isDirty:f})}},[n,i.isDirty]),p.useEffect(()=>{e.values&&!ie(e.values,r.current)?(n._reset(e.values,n._options.resetOptions),r.current=e.values,l(f=>({...f}))):n._resetDefaultValues()},[e.values,n]),p.useEffect(()=>{e.errors&&n._setErrors(e.errors)},[e.errors,n]),p.useEffect(()=>{n._state.mount||(n._updateValid(),n._state.mount=!0),n._state.watch&&(n._state.watch=!1,n._subjects.state.next({...n._formState})),n._removeUnmounted()}),p.useEffect(()=>{e.shouldUnregister&&n._subjects.values.next({values:n._getWatch()})},[e.shouldUnregister,n]),p.useEffect(()=>{t.current&&(t.current.watch=t.current.watch.bind({}))},[i]),t.current.formState=Lr(i,n),t.current}const or=(e,t,r)=>{if(e&&"reportValidity"in e){const i=d(r,t);e.setCustomValidity(i&&i.message||""),e.reportValidity()}},Fr=(e,t)=>{for(const r in t.fields){const i=t.fields[r];i&&i.ref&&"reportValidity"in i.ref?or(i.ref,r,e):i.refs&&i.refs.forEach(l=>or(l,r,e))}},Gr=(e,t)=>{t.shouldUseNativeValidation&&Fr(e,t);const r={};for(const i in e){const l=d(t.fields,i),n=Object.assign(e[i]||{},{ref:l&&l.ref});if(Jr(t.names||Object.keys(e),i)){const f=Object.assign({},d(r,i));k(f,"root",n),k(r,i,f)}else k(r,i,n)}return r},Jr=(e,t)=>e.some(r=>r.startsWith(t+"."));var Qr=function(e,t){for(var r={};e.length;){var i=e[0],l=i.code,n=i.message,f=i.path.join(".");if(!r[f])if("unionErrors"in i){var v=i.unionErrors[0].errors[0];r[f]={message:v.message,type:v.code}}else r[f]={message:n,type:l};if("unionErrors"in i&&i.unionErrors.forEach(function(D){return D.errors.forEach(function(A){return e.push(A)})}),t){var V=r[f].types,N=V&&V[i.code];r[f]=yr(f,t,r,l,N?[].concat(N,i.message):i.message)}e.shift()}return r},it=function(e,t,r){return r===void 0&&(r={}),function(i,l,n){try{return Promise.resolve(function(f,v){try{var V=Promise.resolve(e[r.mode==="sync"?"parse":"parseAsync"](i,t)).then(function(N){return n.shouldUseNativeValidation&&Fr({},n),{errors:{},values:r.raw?i:N}})}catch(N){return v(N)}return V&&V.then?V.then(void 0,v):V}(0,function(f){if(function(v){return Array.isArray(v==null?void 0:v.errors)}(f))return{values:{},errors:Gr(Qr(f.errors,!n.shouldUseNativeValidation&&n.criteriaMode==="all"),n)};throw f}))}catch(f){return Promise.reject(f)}}};export{tt as a,it as t,st as u};
