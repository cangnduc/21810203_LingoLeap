import{j as e,r as c,n as v,o as f,d as p,p as N,q as y,s as j,v as P,w as C,x as L,m as w}from"./index-DVmOQZrp.js";import{z as m}from"./index-DXqQCM1T.js";function E({children:t,className:d}){return e.jsx("div",{className:`${d}`,children:t})}const S=()=>{const[t,d]=c.useState("john.doe@example.com"),[r,n]=c.useState("password123"),[g,{isLoading:x,error:k}]=v(),h=f(),l=p(),[b,u]=c.useState(""),i=async a=>{var s;a.preventDefault(),u("");try{const o=await g({email:t,password:r}).unwrap();o.user&&(h(j({...o})),l("/"))}catch(o){u(((s=o.data)==null?void 0:s.errors)||o.errors||"An error occurred during authentication"),console.error("Failed to login:",o)}};return e.jsxs("form",{onSubmit:i,className:"space-y-4",children:[e.jsx("input",{onChange:a=>d(a.target.value),type:"email",value:t,required:!0,placeholder:"Email",className:"w-full p-3 rounded border border-border-light dark:border-border-dark bg-background-light dark:bg-background-dark text-text-light dark:text-text-dark"}),e.jsx("div",{className:"relative",children:e.jsx("input",{onChange:a=>n(a.target.value),type:"password",value:r,required:!0,placeholder:"Password",className:"w-full p-3 rounded border border-border-light dark:border-border-dark bg-background-light dark:bg-background-dark text-text-light dark:text-text-dark"})}),b&&e.jsx("p",{className:"text-red-500 text-center",children:b}),e.jsx("button",{type:"submit",disabled:x,className:"w-full bg-button-gradient-light dark:bg-button-gradient-dark text-white p-3 rounded transition duration-300 hover:opacity-90 disabled:opacity-50",children:x?"Loading...":"Login"}),e.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[e.jsx("hr",{className:"w-full border-border-light dark:border-border-dark"}),e.jsx("span",{className:"px-2 text-text-light dark:text-text-dark",children:"Or"}),e.jsx("hr",{className:"w-full border-border-light dark:border-border-dark"})]}),e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsxs("button",{className:"w-full flex items-center justify-center bg-red-600 hover:bg-red-700 text-white p-3 rounded transition duration-300",children:[e.jsx(N,{className:"mr-2"})," Continue with Google"]}),e.jsxs("button",{className:"w-full flex items-center justify-center bg-blue-600 hover:bg-blue-700 text-white p-3 rounded transition duration-300",children:[e.jsx(y,{className:"mr-2"})," Continue with Facebook"]})]})]})},F=m.object({email:m.string().min(1,"Email is required").email("Invalid email format"),username:m.string().min(3,"Username must be at least 3 characters").max(20,"Username must not exceed 20 characters"),password:m.string().min(8,"Password must be at least 8 characters"),confirmPassword:m.string().min(1,"Please confirm your password"),role:m.enum(["user","teacher"],{errorMap:()=>({message:"Please select a role"})})}).refine(t=>t.password===t.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),D=()=>{const[t,d]=c.useState({username:"",email:"",password:"",confirmPassword:"",role:""}),[r,n]=c.useState({}),[g,{isLoading:x}]=P(),k=f(),h=p(),l=u=>{const{name:i,value:a}=u.target;d(s=>({...s,[i]:a})),r[i]&&n(s=>({...s,[i]:""}))},b=async u=>{var i;u.preventDefault(),n({});try{const a=F.parse(t),s=await g({username:a.username,email:a.email,password:a.password,role:a.role}).unwrap();k(j({...s})),h("/")}catch(a){if(a.errors){const s={};a.errors.forEach(o=>{s[o.path[0]]=o.message}),n(s)}else n({api:((i=a.data)==null?void 0:i.message)||"An error occurred during registration"})}};return e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("input",{name:"username",onChange:l,value:t.username,type:"text",placeholder:"Full Name",className:`w-full p-3 rounded border ${r.username?"border-red-500":"border-border-light dark:border-border-dark"} bg-background-light dark:bg-background-dark text-text-light dark:text-text-dark`}),r.username&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.username})]}),e.jsxs("div",{children:[e.jsx("input",{name:"email",onChange:l,value:t.email,type:"email",placeholder:"Email",className:`w-full p-3 rounded border ${r.email?"border-red-500":"border-border-light dark:border-border-dark"} bg-background-light dark:bg-background-dark text-text-light dark:text-text-dark`}),r.email&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.email})]}),e.jsxs("div",{children:[e.jsx("input",{name:"password",onChange:l,value:t.password,type:"password",placeholder:"Password",className:`w-full p-3 rounded border ${r.password?"border-red-500":"border-border-light dark:border-border-dark"} bg-background-light dark:bg-background-dark text-text-light dark:text-text-dark`}),r.password&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.password})]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{name:"confirmPassword",onChange:l,value:t.confirmPassword,type:"password",placeholder:"Confirm Password",className:`w-full p-3 rounded border ${r.confirmPassword?"border-red-500":t.confirmPassword&&!r.confirmPassword?"border-green-500":"border-border-light dark:border-border-dark"} bg-background-light dark:bg-background-dark text-text-light dark:text-text-dark`}),t.confirmPassword&&!r.confirmPassword&&e.jsx(C,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-green-500"}),r.confirmPassword&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.confirmPassword})]}),e.jsxs("div",{children:[e.jsxs("select",{name:"role",onChange:l,value:t.role,className:`w-full p-3 rounded border ${r.role?"border-red-500":"border-border-light dark:border-border-dark"} bg-background-light dark:bg-background-dark text-text-light dark:text-text-dark`,children:[e.jsx("option",{value:"",children:"Select Role"}),e.jsx("option",{value:"user",children:"Student"}),e.jsx("option",{value:"teacher",children:"Teacher"})]}),r.role&&e.jsx("p",{className:"text-red-500 text-sm mt-1",children:r.role})]}),r.api&&e.jsx("p",{className:"text-red-500 text-center",children:r.api}),e.jsx("button",{type:"submit",disabled:x,className:"w-full bg-button-gradient-light dark:bg-button-gradient-dark text-white p-3 rounded transition duration-300 hover:opacity-90 disabled:opacity-50",children:x?"Loading...":"Register"})]})},M=()=>{const t=L(),d=p(),[r,n]=c.useState(!0);c.useEffect(()=>{n(t.pathname==="/login")},[t.pathname]);const g=()=>{d(r?"/register":"/login")};return e.jsx(E,{className:"h-[90vh] flex items-center justify-center",children:e.jsx(w.div,{className:"bg-gradient-light dark:bg-gradient-dark w-full max-w-md",layout:!0,transition:{duration:.3},children:e.jsxs(w.div,{className:"bg-box-light dark:bg-box-dark p-8 rounded-lg shadow-lg w-full",layout:!0,transition:{duration:.3},children:[e.jsx("h2",{className:"text-3xl font-bold mb-6 text-center text-primary-light dark:text-primary-dark",children:r?"Login":"Register"}),r?e.jsx(S,{}):e.jsx(D,{}),e.jsxs("p",{className:"mt-4 text-center text-text-light dark:text-text-dark",children:[r?"Don't have an account?":"Already have an account?",e.jsx("button",{onClick:g,className:"ml-1 text-primary-light dark:text-primary-dark hover:underline",children:r?"Register":"Login"})]})]})})})};export{M as default};
